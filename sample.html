<app-root>
  <div id="loading-screen" class="loading-screen">
    <h1>E-learning loading</h1>
    <div class="progress-bar-container">
      <div id="progress-bar" class="progress-bar"></div>
    </div>
    <div id="progress-percentage" class="progress-percentage">0%</div>
  </div>  
  <style>
.loading-screen{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.progress-bar-container{width:80%;max-width:600px;height:20px;background-color:#e0e0e0;border-radius:10px;overflow:hidden}.progress-bar{width:0;height:100%;background-color:#4caf50;transition:width .3s}.progress-percentage{margin-top:10px;font-size:24px;font-weight:700}
  </style>
  <script>
!function(){if(window.loadingScreenInitialized)return;window.loadingScreenInitialized=!0;let e={resourceTypes:["script",'link[rel="stylesheet"]'],transitionDuration:300,minimumDisplayTime:500,fallbackTimeout:1e4},t={screen:document.getElementById("loading-screen"),progressBar:document.getElementById("progress-bar"),progressText:document.getElementById("progress-percentage")},r={totalSize:0,loadedSize:0,resourcesCount:0,loadedCount:0,startTime:performance.now(),allResourcesPromise:null};function o(e){return new Promise(t=>{let r=e.src||e.href;if(!r){t(0);return}try{let o=new XMLHttpRequest;o.open("HEAD",r,!0),o.timeout=3e3,o.onload=()=>{if(200===o.status){let e=o.getResponseHeader("Content-Length");t(e?parseInt(e,10):1e3)}else t(1e3)},o.ontimeout=o.onerror=()=>t(1e3),o.send()}catch(n){t(1e3)}})}function n(e){r.loadedCount++,r.loadedSize+=e||0;let o=Math.min(100,r.totalSize>0?Math.round(r.loadedSize/r.totalSize*100):Math.round(r.loadedCount/r.resourcesCount*100));t.progressBar.style.width=`${o}%`,t.progressText.textContent=`${o}%`,r.loadedCount>=r.resourcesCount&&(t.progressBar.style.width="100%",t.progressText.textContent="100%")}!function s(){let l=function t(){let r=[];return e.resourceTypes.forEach(e=>{try{let t=document.querySelectorAll(e);r.push(...Array.from(t))}catch(o){console.error(`Error selecting resources with ${e}:`,o)}}),r}();r.resourcesCount=l.length;let a=setTimeout(()=>{console.warn("Loading screen fallback timeout triggered"),t.progressBar.style.width="100%",t.progressText.textContent="100%"},e.fallbackTimeout);if(0===l.length){t.progressBar.style.width="100%",t.progressText.textContent="100%",clearTimeout(a);return}r.allResourcesPromise=Promise.all(l.map(o)).then(e=>{r.totalSize=e.reduce((e,t)=>e+t,0),l.forEach((t,r)=>{!function e(t,r){if("script"===t.tagName.toLowerCase()&&t.src){let o=document.createElement("script");o.src=t.src,t.async&&(o.async=!0),t.defer&&(o.defer=!0),t.type&&(o.type=t.type),o.onload=()=>n(r),o.onerror=()=>n(0),document.head.appendChild(o)}else if("link"===t.tagName.toLowerCase()&&t.href){let s=document.createElement("link");s.rel="stylesheet",s.href=t.href,s.onload=()=>n(r),s.onerror=()=>n(0),document.head.appendChild(s)}else n(r)}(t,e[r])}),clearTimeout(a)}).catch(e=>{console.error("Error during resource size fetching:",e),t.progressBar.style.width="100%",t.progressText.textContent="100%",clearTimeout(a)})}()}();
  </script>
</app-root>
